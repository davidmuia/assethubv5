<div class="report-header">
    <div>
        <h4>Repair Cost & Frequency Analysis by Asset</h4>
        <p class="text-muted small mb-0">A detailed breakdown of maintenance history for each asset.</p>
    </div>
    <div class="report-export-buttons"></div>
</div>

<table class="table table-sm table-striped datatable" style="width:100%">
    <thead>
        <tr>
            <th>Asset Tag</th>
            <th>Make/Model</th>
            <th class="text-center">Total Repairs</th>
            <th class="text-center">Completed Repairs</th>
            <th>Total Repair Cost</th>
            <th>Last Completed Repair</th>
        </tr>
    </thead>
    <tbody>

        {% for asset, total_cost, total_repair_count, completed_repair_count, last_completed_date in assets_with_costs %}
        <tr>
            <td><a href="{{ url_for('main.asset_detail', id=asset.id) }}">{{ asset.asset_tag }}</a></td>
            <td>{{ asset.make_model }}</td>
            <td class="text-center">{{ total_repair_count }}</td>
            <td class="text-center">{{ completed_repair_count }}</td>
            <td>${{ "%.2f"|format(total_cost) }}</td>
            <td>{{ last_completed_date | localdatetime('%Y-%m-%d') if last_completed_date else 'N/A' }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>